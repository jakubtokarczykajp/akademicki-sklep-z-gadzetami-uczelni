{% extends 'base.html' %}
{% load i18n %}
{% load static %}
{% load currency_filters %} 

{% block title %}{% trans "Produkty" %}{% endblock %}

{% block content %}
<div class="container mx-auto py-8">
    <h1 class="text-3xl font-bold mb-6 text-center">Lista produktów</h1>
    
    {% if page_obj.object_list %}
        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
            {% for product in page_obj.object_list %}
                <div class="bg-white rounded-lg shadow-md hover:shadow-xl transition-shadow duration-200 p-4 flex flex-col items-center border border-gray-200">
                    
                    <a href="{{ product.get_absolute_url }}">
                    
                        {% if product.primary_image %}
                            <img src="{{ product.primary_image.url }}" alt="{{ product.title }}" class="h-40 object-contain mb-4 rounded" />
                        {% else %}
                            <div class="h-40 flex items-center justify-center bg-gray-100 mb-4 w-full rounded">
                                <span class="text-gray-400">Brak zdjęcia</span>
                            </div>
                        {% endif %}
                        
                        {# Tytuł #}
                        <h2 class="text-lg font-semibold text-blue-700 mb-2">{{ product.title }}</h2>
                    </a>

            
                    {% with price=product.get_base_price %}
                        <div class="text-gray-700 font-bold text-xl mb-2">
                            {% if price and price.incl_tax %}
                                {{ price.incl_tax|currency }}
                            {% else %}
                                CENA N/D
                            {% endif %}
                        </div>
                    {% endwith %}
                    
                    <a href="{{ product.get_absolute_url }}" class="mt-auto inline-block bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded transition-colors duration-200">Zobacz produkt</a>
                </div>
            {% endfor %}
        </div>
      
        {% include "oscar/partials/pagination.html" %} 
    {% else %}
        <p class="text-center text-gray-400">Brak produktów do wyświetlenia.</p>
    {% endif %}
</div>
{% endblock %}